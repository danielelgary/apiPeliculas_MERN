(this.webpackJsonpfrontapipeliculas=this.webpackJsonpfrontapipeliculas||[]).push([[0],{29:function(e,t,c){},31:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),s=c(16),l=c.n(s),r=(c(29),c(0));var a=c(17),j=c(18),d=c(24),o=c(23),u=(i.a.Component,c(8)),b=(c(31),c(19)),h=c(21),O=c(2);function x(e){var t=Object(O.g)();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"divPelicula",onClick:function(c){t.push("/detalle/"+e.pelicula._id)},children:[Object(r.jsx)("div",{className:"divPoster",children:Object(r.jsx)("img",{alt:"P\xf3ster",src:e.pelicula.poster})}),Object(r.jsx)("div",{className:"divTitulo",children:Object(r.jsx)("h2",{children:e.pelicula.titulo})}),Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:e.pelicula.sinopsis})}),Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:[Object(r.jsx)(b.a,{icon:h.a}),e.pelicula.rating]})})]})})}c(42);var f="http://44.200.28.118:3000/api";function m(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],i=t[1],s=Object(n.useState)([]),l=Object(u.a)(s,2),a=l[0],j=l[1];return Object(n.useEffect)((function(){var e;return c.length>=4?(e=c,fetch(f+"/peliculas/obtenerPeliculaPorTitulo/"+e,{method:"GET",mode:"cors"}).then((function(e){if(200===e.status)return e.json();Promise.reject(e.statusText)})).catch((function(e){return console.log(e)}))).then((function(e){j(e.data)})):j([]),function(){}}),[c]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"divBusqueda",children:Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Buscar Peliculas"}),Object(r.jsx)("input",{type:"text",id:"busqueda",name:"busqueda",onChange:function(e){var t=e.target.value;i(t)},placeholder:"Titulo de la pelicula"})]})})}),Object(r.jsx)("div",{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Listado Peliculas"}),Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["Mostrando resultado para: ",c]})}),Object(r.jsx)("div",{className:"divResultados",children:a&&a.length>0&&a.map((function(e){return Object(r.jsx)(x,{pelicula:e})}))})]})})]})}function p(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:e.titulo}),Object(r.jsx)("ul",{children:e.datos&&e.datos.map((function(e,t){return Object(r.jsxs)("li",{children:[e.nombre," ",e.apellido]},t)}))})]})})}function g(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:e.titulo}),e.datos&&Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:["Cantidad: ",e.datos.cantidad," "]},1),Object(r.jsxs)("li",{children:["Gandas: ",e.datos.ganadas," "]},2)]})]})})}function v(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:e.titulo}),Object(r.jsx)("ul",{children:e.datos&&e.datos.map((function(e,t){return Object(r.jsxs)("li",{children:[" ",e,"  "]},t)}))})]})})}c(43);function S(){var e=Object(O.h)().id,t=Object(n.useState)({}),c=Object(u.a)(t,2),i=c[0],s=c[1];return Object(n.useEffect)((function(){(function(e){return fetch(f+"/peliculas/obtenerPelicula/"+e,{method:"GET",mode:"cors"}).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).catch((function(e){return console.log(e)}))})(e).then((function(e){s(e.data)})).catch((function(e){return console.log(e)}))}),[e]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"DivDetalleDetalle",children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Detalle Pelicula "}),Object(r.jsxs)("h2",{children:[" ",i.titulo," "]}),Object(r.jsxs)("div",{className:"DivMainDetalle",children:[Object(r.jsx)("div",{className:"DivPosterDetalle",children:Object(r.jsx)("img",{alt:"Poster",src:i.poster})}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"A\xf1o"}),Object(r.jsx)("span",{children:i.ano})]}),Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Rating"}),Object(r.jsx)("span",{children:i.rating})]}),Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Clasificacion"}),Object(r.jsx)("span",{children:i.clasificacion})]})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Sinopsis"}),Object(r.jsx)("p",{children:i.sinopsis})]})})]})]})}),Object(r.jsx)("div",{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Detalle"}),Object(r.jsx)(p,{titulo:"Actores",datos:i.actores}),Object(r.jsxs)("div",{className:"DivDatosDetalle",children:[Object(r.jsx)(v,{titulo:"Generos",datos:i.generos}),Object(r.jsx)(v,{titulo:"Idiomas",datos:i.idiomas}),Object(r.jsx)(v,{titulo:"Paises",datos:i.paises}),Object(r.jsx)(g,{titulo:"Nominaciones",datos:i.nominaciones})]}),Object(r.jsx)(v,{titulo:"Directores",datos:i.directores})]})})]})}function C(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"AdministrarPeliculas"})})})}function P(e){var t=Object(n.useState)(""),c=Object(u.a)(t,2),i=c[0],s=c[1],l=Object(n.useState)(""),a=Object(u.a)(l,2),j=a[0],d=a[1],o=Object(O.g)();function b(e){"usuario"===e.target.name?s(e.target.value):"clave"===e.target.name&&d(e.target.value)}return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Iniciar Sesion"}),Object(r.jsx)("form",{children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("label",{htmlFor:"usuario",children:"Usario: "})}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{type:"text",id:"usuario",name:"usuario",value:i,onChange:b})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("label",{htmlFor:"clave",children:"Contrase\xf1a: "})}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{type:"password",id:"clave",name:"clave",value:j,onChange:b})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"button",onClick:function(t){t.preventDefault(),function(e,t){return fetch(f+"/usuarios/iniciarSesion?usuario="+e+"&clave="+t,{method:"GET",mode:"cors"}).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)}))}(i,j).then((function(t){if(t.token){var c={token:t.token,nombre:t.datos.nombre,roles:t.datos.roles};localStorage.setItem("auth",JSON.stringify(c)),e.autenticado(c),o.push("/administrar")}})).catch((function(e){return console.log(e)}))},children:"Iniciar Sesion"})})]})]})})})]})})})}c(44);function D(e){var t=Object(O.g)();function c(c){c.preventDefault(),"iniciar"===c.target.value?t.push("/login"):(localStorage.removeItem("auth"),e.autenticado(null),t.push("/"))}return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("header",{className:"header",children:[e.usuario&&Object(r.jsx)("button",{type:"button",onClick:c,value:"cerrar",children:"Cerrar Sesion"}),!e.usuario&&Object(r.jsx)("button",{type:"button",onClick:c,value:"iniciar",children:"Iniciar Sesion"})]}),e.children]})}function F(){var e=localStorage.getItem("auth"),t=Object(n.useState)(e),c=Object(u.a)(t,2),i=c[0],s=c[1];return Object(r.jsx)(O.d,{children:Object(r.jsxs)(D,{usuario:i,autenticado:s,children:[Object(r.jsx)(O.b,{exact:!0,path:"/",component:m}),Object(r.jsx)(O.b,{path:"/detalle/:id",component:S}),Object(r.jsx)(O.b,{path:"/administrar",children:i?Object(r.jsx)(C,{}):Object(r.jsx)(O.a,{to:"/login"})}),Object(r.jsx)(O.b,{path:"/login",children:Object(r.jsx)(P,{autenticado:s})})]})})}var N=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"CREANDO COMPONENETES CON REACT"}),Object(r.jsx)(F,{})]})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,46)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,l=t.getTTFB;c(e),n(e),i(e),s(e),l(e)}))},k=c(22);l.a.render(Object(r.jsx)(k.a,{children:Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(N,{})})}),document.getElementById("root")),T()}},[[45,1,2]]]);
//# sourceMappingURL=main.2c5f093e.chunk.js.map